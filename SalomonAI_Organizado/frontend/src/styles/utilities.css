@tailwind utilities;

/* ==== GLASS BASED ON EXISTING TOKENS (HSL vars) ==== */
:root {
  --glass-bg: hsl(var(--surface) / 0.8);
  --glass-bg-strong: hsl(var(--surface) / 0.9);
  --glass-border: hsl(var(--border) / 0.72);
}

.dark {
  --glass-bg: hsl(var(--surface) / 0.86);
  --glass-bg-strong: hsl(var(--surface) / 0.92);
  --glass-border: hsl(var(--border) / 0.78);
}

.glass-panel {
  background: var(--glass-bg);
  backdrop-filter: blur(14px) saturate(1.2);
  -webkit-backdrop-filter: blur(14px) saturate(1.2);
  border: 1px solid var(--glass-border);
  border-radius: 1rem;
  color: hsl(var(--foreground));
}

.glass-panel.rounded-none {
  border-radius: 0;
}

.glass-body {
  position: relative;
}

.glass-body::before {
  content: "";
  position: absolute;
  inset: 0;
  background: var(--glass-bg-strong);
  border-radius: inherit;
  z-index: 0;
}

.glass-body > * {
  position: relative;
  z-index: 1;
}

.safe-pt {
  padding-top: max(16px, env(safe-area-inset-top));
}

.safe-pb {
  padding-bottom: max(16px, env(safe-area-inset-bottom));
}

.touch-target {
  min-height: 44px;
  min-width: 44px;
}

.touch-feedback {
  transition: transform 180ms ease, opacity 180ms ease;
}

@media (hover: none) {
  .touch-target:active,
  .touch-feedback:active {
    transform: scale(0.98);
    opacity: 0.96;
  }
}

.no-glass {
  background: hsl(var(--card));
}

.h1 {
  @apply text-2xl font-semibold tracking-tight leading-tight md:text-3xl;
}

.h2 {
  @apply text-xl font-semibold leading-tight md:text-2xl;
}

.h3 {
  @apply text-lg font-medium leading-snug md:text-xl;
}

.body {
  @apply text-base leading-relaxed;
}

.caption {
  @apply text-sm opacity-80;
}

.section-gap {
  @apply gap-6 md:gap-8;
}

.card-pad {
  @apply p-5 md:p-6;
}

.rounded-std {
  @apply rounded-xl md:rounded-2xl;
}

.scroll-x {
  position: relative;
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
}

.scroll-x::after {
  content: "";
  position: absolute;
  right: 0;
  top: 0;
  bottom: 0;
  width: 24px;
  pointer-events: none;
  background: linear-gradient(to right, transparent, hsl(var(--background)));
}

.line-clamp-2 {
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.elevated-card {
  position: relative;
  overflow: hidden;
  border-radius: 1.25rem;
  background: color-mix(in srgb, var(--card-surface) 90%, transparent);
  border: 1px solid color-mix(in srgb, var(--border-color) 62%, transparent);
  box-shadow:
    0 14px 36px -26px color-mix(in srgb, var(--border-color) 48%, transparent),
    0 4px 16px -12px color-mix(in srgb, var(--border-color) 38%, transparent);
  transition:
    transform 280ms ease,
    box-shadow 280ms ease,
    border-color 280ms ease,
    background 280ms ease;
  backdrop-filter: blur(16px);
  will-change: transform, box-shadow;
}

.elevated-card::before,
.elevated-card::after {
  content: "";
  position: absolute;
  inset: -1px;
  pointer-events: none;
  border-radius: inherit;
  opacity: 0;
  transition: opacity 320ms ease;
}

.elevated-card::before {
  background: linear-gradient(
    135deg,
    color-mix(in srgb, var(--accent) 18%, transparent) 0%,
    color-mix(in srgb, var(--surface) 90%, transparent) 100%
  );
  mix-blend-mode: screen;
}

.elevated-card::after {
  background:
    radial-gradient(circle at 0% -10%, rgba(255, 255, 255, 0.28) 0%, transparent 55%),
    linear-gradient(135deg, rgba(255, 255, 255, 0.12), rgba(255, 255, 255, 0));
}

.elevated-card:hover,
.elevated-card:focus-within {
  transform: translateY(-3px);
  border-color: color-mix(in srgb, var(--border-color) 78%, transparent);
  background: color-mix(in srgb, var(--card-surface) 94%, transparent);
  box-shadow:
    0 26px 54px -34px color-mix(in srgb, var(--border-color) 60%, transparent),
    0 12px 32px -18px color-mix(in srgb, var(--border-color) 46%, transparent);
}

.elevated-card:hover::before,
.elevated-card:hover::after,
.elevated-card:focus-within::before,
.elevated-card:focus-within::after {
  opacity: 1;
}

.dark .elevated-card {
  background: color-mix(in srgb, var(--card-surface) 82%, transparent);
  border-color: color-mix(in srgb, var(--border-color) 58%, transparent);
  box-shadow:
    0 18px 44px -32px color-mix(in srgb, var(--border-color) 62%, transparent),
    0 10px 26px -18px color-mix(in srgb, var(--border-color) 46%, transparent);
}

.dark .elevated-card::before {
  background: linear-gradient(
    145deg,
    color-mix(in srgb, var(--accent) 26%, transparent) 0%,
    color-mix(in srgb, var(--surface) 86%, transparent) 100%
  );
}

.dark .elevated-card::after {
  background:
    radial-gradient(circle at 0% -15%, rgba(255, 255, 255, 0.25) 0%, transparent 60%),
    linear-gradient(140deg, rgba(255, 255, 255, 0.08), rgba(255, 255, 255, 0));
}

.dark .elevated-card:hover,
.dark .elevated-card:focus-within {
  border-color: color-mix(in srgb, var(--border-color) 70%, transparent);
  background: color-mix(in srgb, var(--card-surface) 88%, transparent);
  box-shadow:
    0 34px 58px -34px color-mix(in srgb, var(--border-color) 72%, transparent),
    0 16px 36px -20px color-mix(in srgb, var(--border-color) 54%, transparent);
}

.surface-tile {
  position: relative;
  overflow: hidden;
  border-radius: 1rem;
  background: color-mix(in srgb, var(--card-surface) 88%, transparent);
  border: 1px solid color-mix(in srgb, var(--border-color) 60%, transparent);
  transition: transform 240ms ease, box-shadow 240ms ease, border-color 240ms ease;
  backdrop-filter: blur(14px);
  will-change: transform, box-shadow;
}

.surface-tile::after {
  content: "";
  position: absolute;
  inset: -1px;
  border-radius: inherit;
  background: linear-gradient(120deg, rgba(255, 255, 255, 0.14), rgba(255, 255, 255, 0));
  pointer-events: none;
  opacity: 0;
  transition: opacity 280ms ease;
}

.surface-tile:hover,
.surface-tile:focus-within {
  transform: translateY(-2px);
  border-color: color-mix(in srgb, var(--border-color) 74%, transparent);
  box-shadow:
    0 20px 42px -28px color-mix(in srgb, var(--border-color) 56%, transparent),
    0 10px 24px -18px color-mix(in srgb, var(--border-color) 44%, transparent);
}

.surface-tile:hover::after,
.surface-tile:focus-within::after {
  opacity: 1;
}

.dark .surface-tile {
  background: color-mix(in srgb, var(--card-surface) 80%, transparent);
  border-color: color-mix(in srgb, var(--border-color) 56%, transparent);
}

.dark .surface-tile:hover,
.dark .surface-tile:focus-within {
  border-color: color-mix(in srgb, var(--border-color) 68%, transparent);
  box-shadow:
    0 26px 46px -30px color-mix(in srgb, var(--border-color) 66%, transparent),
    0 12px 28px -18px color-mix(in srgb, var(--border-color) 50%, transparent);
}

:where(.rounded-lg.border, .rounded-xl.border, .rounded-2xl.border) {
  background: color-mix(in srgb, var(--card-surface) 88%, transparent);
  border-color: color-mix(in srgb, var(--border-color) 62%, transparent);
  transition: transform 260ms ease, box-shadow 260ms ease, border-color 260ms ease;
  backdrop-filter: blur(14px);
}

:where(.rounded-lg.border, .rounded-xl.border, .rounded-2xl.border):hover,
:where(.rounded-lg.border, .rounded-xl.border, .rounded-2xl.border):focus-within {
  transform: translateY(-2px);
  border-color: color-mix(in srgb, var(--border-color) 76%, transparent);
  box-shadow:
    0 20px 42px -28px color-mix(in srgb, var(--border-color) 54%, transparent),
    0 10px 26px -18px color-mix(in srgb, var(--border-color) 42%, transparent);
}

.dark :where(.rounded-lg.border, .rounded-xl.border, .rounded-2xl.border) {
  background: color-mix(in srgb, var(--card-surface) 80%, transparent);
  border-color: color-mix(in srgb, var(--border-color) 58%, transparent);
}

.dark :where(.rounded-lg.border, .rounded-xl.border, .rounded-2xl.border):hover,
.dark :where(.rounded-lg.border, .rounded-xl.border, .rounded-2xl.border):focus-within {
  border-color: color-mix(in srgb, var(--border-color) 70%, transparent);
  box-shadow:
    0 26px 46px -30px color-mix(in srgb, var(--border-color) 64%, transparent),
    0 12px 28px -18px color-mix(in srgb, var(--border-color) 48%, transparent);
}

.glass-panel {
  background: color-mix(in srgb, var(--bg) 38%, transparent);
  backdrop-filter: blur(14px);
  border: 1px solid color-mix(in srgb, var(--border-color) 62%, transparent);
  border-radius: 1.25rem;
  box-shadow:
    0 24px 48px -32px color-mix(in srgb, var(--border-color) 45%, transparent),
    0 18px 40px -28px color-mix(in srgb, var(--border-color) 28%, transparent);
}

.dark .glass-panel {
  background: color-mix(in srgb, var(--bg) 22%, transparent);
  border-color: color-mix(in srgb, var(--border-color) 38%, transparent);
  box-shadow:
    0 24px 48px -30px color-mix(in srgb, var(--border-color) 55%, transparent),
    0 18px 40px -24px color-mix(in srgb, var(--border-color) 30%, transparent);
}

.soft-card {
  box-shadow:
    12px 16px 42px color-mix(in srgb, var(--border-color) 28%, transparent),
    -8px -12px 32px color-mix(in srgb, var(--bg) 20%, transparent);
}

.dark .soft-card {
  box-shadow:
    12px 18px 44px color-mix(in srgb, var(--border-color) 46%, transparent),
    -6px -10px 28px color-mix(in srgb, var(--bg) 28%, transparent);
}
