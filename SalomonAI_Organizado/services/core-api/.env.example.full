# Full environment example for core-api with all integrations enabled.
# Copy to `.env` and replace values with the secrets provisioned for your deployment.

# Runtime & strictness
NODE_ENV=production
PORT=8080
STRICT_ENV=true

# Postgres database configuration (required when STRICT_ENV=true)
POSTGRES_HOST=postgres-primary.internal
POSTGRES_PORT=5432
POSTGRES_USER=salomon_app
POSTGRES_PASSWORD=super_secure_password
POSTGRES_DB=salomon_core

# JWT tokens
JWT_SECRET=change_me_to_a_strong_secret
JWT_EXPIRES_IN=24h
JWT_ACCESS_TOKEN_TTL_SECONDS=900
JWT_REFRESH_TOKEN_TTL_SECONDS=2592000

# Kafka event streaming
KAFKA_BROKER=kafka-1.internal:9092
KAFKA_CLIENT_ID=salomon-core-api
KAFKA_TOPIC=transactions.documents
KAFKA_CLASSIFICATION_RETRAIN_TOPIC=classification.retraining
KAFKA_CLASSIFICATION_CORRECTIONS_TOPIC=classification.corrections

# Qdrant vector database
QDRANT_URL=https://qdrant.internal:6333
QDRANT_COLLECTION=transactions

# Frontend & CORS
FRONTEND_URL=https://app.salomon.ai
ALLOWED_ORIGINS=http://localhost:3000,https://app.salomon.ai,https://prueba-salomon.vercel.app
# CORS_ORIGIN=http://localhost:3000

# Dependent microservices
RECOMMENDATION_ENGINE_URL=https://recommendations.internal:8004
RECOMMENDATION_ENGINE_TIMEOUT_MS=8000
FORECASTING_ENGINE_URL=https://forecasts.internal:8003
FORECASTING_DEFAULT_HORIZON_DAYS=60
FORECASTING_DEFAULT_MODEL=prophet
FORECASTING_DATABASE_URL=postgresql://forecast_user:forecast_pass@forecasting-db.internal:5432/forecasts
FINANCIAL_CONNECTOR_URL=https://financial-connector.internal:8002
NLP_ENGINE_URL=https://nlp.internal:8001
TAX_ENGINE_URL=https://tax-engine.internal:8010
RISK_ENGINE_URL=https://risk-engine.internal:8011
UPLOADS_PATH=/var/lib/salomon/uploads
CACHE_TTL=3600

# Firebase service account (individual fields)
FIREBASE_PROJECT_ID=salomon-prod
FIREBASE_PRIVATE_KEY_ID=0123456789abcdef0123456789abcdef01234567
FIREBASE_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\\nYOUR_PRIVATE_KEY_CONTENT\\n-----END PRIVATE KEY-----\\n"
FIREBASE_CLIENT_EMAIL=firebase-adminsdk@salomon-prod.iam.gserviceaccount.com
FIREBASE_CLIENT_ID=123456789012345678901
FIREBASE_CLIENT_CERT_URL=https://www.googleapis.com/robot/v1/metadata/x509/firebase-adminsdk%40salomon-prod.iam.gserviceaccount.com
FIREBASE_DATABASE_URL=https://salomon-prod.firebaseio.com
# FIREBASE_SERVICE_ACCOUNT_KEY='{"type":"service_account","project_id":"salomon-prod",...}'

# Belvo (open finance provider)
BELVO_SECRET_ID=belvo-secret-id
BELVO_SECRET_PASSWORD=belvo-secret-password
BELVO_ENVIRONMENT=production

# Google OAuth
GOOGLE_CLIENT_ID=1234567890-abcdefg.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=google-client-secret
GOOGLE_OAUTH_REDIRECT_URI=https://app.salomon.ai/auth/google/callback

# Notifications integrations
TWILIO_ACCOUNT_SID=ACXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
TWILIO_AUTH_TOKEN=twilio-auth-token
TWILIO_FROM_NUMBER=+15551234567
SENDGRID_API_KEY=SG.xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
SENDGRID_SENDER_EMAIL=notificaciones@salomon.ai

# Internal API access
INTERNAL_API_KEY=internal-api-key-value

# Security telemetry & key management
SIEM_ENDPOINT=https://siem.salomon.ai/events
SIEM_TOKEN=siem-access-token
KMS_ENDPOINT=https://kms.salomon.ai
KMS_API_KEY=kms-api-key
ENABLE_TLS=true
TLS_CERT_PEM="-----BEGIN CERTIFICATE-----\\nMIIF...example...\\n-----END CERTIFICATE-----\\n"
TLS_KEY_PEM="-----BEGIN PRIVATE KEY-----\\nMIIE...example...\\n-----END PRIVATE KEY-----\\n"
# TLS_CERT_PEM_CIPHERTEXT= # Provide if cert is stored encrypted and decrypted via KMS
# TLS_KEY_PEM_CIPHERTEXT=  # Provide if key is stored encrypted and decrypted via KMS

